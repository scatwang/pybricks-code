(self.webpackChunk_pybricks_pybricks_code=self.webpackChunk_pybricks_pybricks_code||[]).push([[3780],{33085:(e,q,t)=>{"use strict";t.r(q),t.d(q,{default:()=>E});t(90613);var r=t(44239),n=t(21553),s=t(59560),o=t(29158),a=t(70280),c=t(79734),l=t(76244),i=t(17721),u=t(16938),d=t(57889),f=t(36013),A=t(38713),p=t(75494),b=t(76940),m=t(18082),x=t(69154),v=t(32430),y=t(96609),h=t(74118);var j=t(51541);function k(e){return!("v"===e.key&&e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)&&("F5"!==e.key&&"F6"!==e.key)}function C(){const e=new p.Terminal({cursorBlink:!0,cursorStyle:"underline",fontSize:18}),q=new b.FitAddon;return e.loadAddon(q),e.attachCustomKeyEventHandler(k),{xterm:e,fitAddon:q}}const w=e=>{let{xterm:q}=e;const o=function(){const[e]=(0,h.Q)({id:"i18n_cu8cqv",fallback:y,translations(e){if(!([].indexOf(e)<0))return t(86901)(`./${e}.json`).then((e=>e&&e.default))}});return e}(),[a,f]=(0,d.useState)(q.hasSelection());return(0,d.useEffect)((()=>{const e=q.onSelectionChange((()=>{f(q.hasSelection())}));return()=>e.dispose()}),[q,f]),(0,j.jsxs)(r.v,{children:[(0,j.jsx)(n.s,{onClick:()=>{const e=q.getSelection();e&&navigator.clipboard.writeText(e)},text:o.translate("copy"),icon:(0,j.jsx)(c.F,{}),label:(0,m.eE)()?"Cmd-C":"Ctrl-Shift-C",disabled:!a}),(0,j.jsx)(n.s,{onClick:async()=>{q.paste(await navigator.clipboard.readText())},text:o.translate("paste"),icon:(0,j.jsx)(l.T,{}),label:(0,m.eE)()?"Cmd-V":"Ctrl-V"}),(0,j.jsx)(n.s,{onClick:()=>q.selectAll(),text:o.translate("selectAll"),icon:(0,j.jsx)(i.e,{})}),(0,j.jsx)(s.R,{}),(0,j.jsx)(n.s,{onClick:()=>q.clear(),text:o.translate("clear"),icon:(0,j.jsx)(u.r,{})})]})},E=()=>{const{xterm:e,fitAddon:q}=(0,d.useMemo)(C,[C]),t=(0,d.useRef)(null),{isDarkMode:r}=(0,A.vy)(),n=(0,f.I0)(),s=(0,d.useContext)(x.j);(0,d.useEffect)((()=>{var r,n;if(t.current)return e.open(t.current),q.fit(),null===(r=e.element)||void 0===r||r.removeAttribute("tabindex"),null===(n=e.textarea)||void 0===n||n.setAttribute("tabindex","-1"),()=>e.dispose();console.error("Missing terminal reference")}),[e,q]),(0,d.useEffect)((()=>{e.options.theme={background:r?"black":"white",foreground:r?"white":"black",cursor:r?"white":"black",selectionBackground:r?"rgb(81,81,81,0.5)":"rgba(181,213,255,0.5)"}}),[r,e]),(0,d.useEffect)((()=>{const q=q=>{var r;"C"===q.key&&q.ctrlKey&&q.shiftKey&&!q.altKey&&!q.metaKey&&(q.preventDefault(),document.hasFocus()&&document.activeElement===(null===(r=t.current)||void 0===r?void 0:r.getElementsByClassName("xterm-helper-textarea")[0])&&e.hasSelection()&&navigator.clipboard.writeText(e.getSelection()))};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)}),[t,e]),(0,d.useEffect)((()=>{const q=s.dataSource.observable.subscribe({next:q=>e.write(q)});return()=>q.unsubscribe()}),[s,e]),(0,d.useEffect)((()=>{const q=e.onData((e=>n((0,v.f)(e))));return()=>q.dispose()}),[n,e]),(0,d.useEffect)((()=>{const q=()=>{e.focus()};return addEventListener("pb-terminal-focus",q),()=>removeEventListener("pb-terminal-focus",q)}),[e]);const c=(0,d.useRef)(null),l=(0,d.useRef)(null),i=(0,d.useRef)();return(0,d.useEffect)((()=>{const q=c.current,t=l.current;if(!q||!t)return;const r=e.onBell((()=>{i.current&&clearTimeout(i.current),q.play(),t.classList.add("pb-bell"),i.current=setTimeout((()=>{t.classList.remove("pb-bell")}),150)}));return()=>r.dispose()}),[e,c,l,i]),(0,j.jsxs)(o.x,{className:"h-100",content:(0,j.jsx)(w,{xterm:e}),popoverProps:{onClosed:()=>e.focus()},children:[(0,j.jsx)("audio",{hidden:!0,preload:"auto",ref:c,children:(0,j.jsx)("source",{src:"data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"})}),(0,j.jsx)("div",{className:"pb-terminal-bell-overlay",ref:l}),(0,j.jsx)(a.z,{targetRef:t,onResize:()=>q.fit(),children:(0,j.jsx)("div",{ref:t,className:"h-100"})})]})}},32430:(e,q,t)=>{"use strict";t.d(q,{$:()=>n,f:()=>s});var r=t(54629);const n=(0,r.P)((e=>({type:"terminal.action.sendData",value:e}))),s=(0,r.P)((e=>({type:"terminal.action.receiveData",value:e})))},86901:(e,q,t)=>{var r={"./en.json":96609};function n(e){return s(e).then((e=>t.t(e,19)))}function s(e){return Promise.resolve().then((()=>{if(!t.o(r,e)){var q=new Error("Cannot find module '"+e+"'");throw q.code="MODULE_NOT_FOUND",q}return r[e]}))}n.keys=()=>Object.keys(r),n.resolve=s,n.id=86901,e.exports=n},96609:e=>{"use strict";e.exports=JSON.parse('{"copy":"Copy","paste":"Paste","selectAll":"Select All","clear":"Clear"}')}}]);
//# sourceMappingURL=3780.4d222b83.chunk.js.map